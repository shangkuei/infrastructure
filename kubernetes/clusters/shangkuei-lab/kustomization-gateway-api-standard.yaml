---
# Flux Kustomization for Gateway API Standard CRDs
# Standard channel: GatewayClass, Gateway, HTTPRoute, GRPCRoute, ReferenceGrant
# Uses ExternalArtifact generated by ArtifactGenerator from GitRepository
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: gateway-api-standard
  namespace: flux-system
spec:
  interval: 30m
  timeout: 5m
  prune: false
  wait: true

  sourceRef:
    kind: ExternalArtifact
    name: gateway-api-standard
    namespace: flux-system

  path: ./

  # No dependencies - CRDs are foundational
  # Force apply for CRDs
  force: true

  healthChecks:
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: gatewayclasses.gateway.networking.k8s.io
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: gateways.gateway.networking.k8s.io
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: httproutes.gateway.networking.k8s.io
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: grpcroutes.gateway.networking.k8s.io
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: referencegrants.gateway.networking.k8s.io
