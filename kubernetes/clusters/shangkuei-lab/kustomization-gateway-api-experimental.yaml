---
# Flux Kustomization for Gateway API Experimental CRDs
# Experimental channel: TLSRoute (required by Cilium)
# Uses ExternalArtifact generated by ArtifactGenerator from GitRepository
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: gateway-api-experimental
  namespace: flux-system
spec:
  interval: 30m
  timeout: 5m
  prune: false
  wait: true

  sourceRef:
    kind: ExternalArtifact
    name: gateway-api-experimental
    namespace: flux-system

  path: ./

  # Force apply for CRDs
  force: true

  healthChecks:
    - apiVersion: apiextensions.k8s.io/v1
      kind: CustomResourceDefinition
      name: tlsroutes.gateway.networking.k8s.io
