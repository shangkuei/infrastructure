---
# Tailscale Service for Loki Gateway
# Exposes Loki to Tailscale network for log push from external clients
# Endpoint: http://loki/loki/api/v1/push
# Tenant ID: shangkuei-lab (X-Scope-OrgID header)
apiVersion: v1
kind: Service
metadata:
  name: loki-tailscale
  namespace: monitoring
  annotations:
    tailscale.com/expose: "true"
    tailscale.com/hostname: "loki"
  labels:
    app.kubernetes.io/name: loki
    app.kubernetes.io/component: tailscale-proxy
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/name: loki
    app.kubernetes.io/component: gateway
  ports:
    - name: http
      port: 80
      targetPort: 8080
      protocol: TCP
