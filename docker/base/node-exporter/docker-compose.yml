# Prometheus Node Exporter - Host metrics exporter
# Base configuration - override with environment-specific settings
#
# Exposes host-level metrics (CPU, memory, disk, network) for Prometheus scraping.
# Metrics available at :9100/metrics

name: node-exporter

services:
  node-exporter:
    image: prom/node-exporter:v1.8.2
    container_name: node-exporter
    restart: unless-stopped
    command:
      - '--path.rootfs=/host'
      - '--path.procfs=/host/proc'
      - '--path.sysfs=/host/sys'
      - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)'
    pid: host
    volumes:
      # Mount host filesystem for metrics collection
      - /:/host:ro,rslave
    ports:
      - "9100:9100"
    networks:
      - node-exporter
    # Healthcheck
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:9100/metrics"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

networks:
  node-exporter:
    name: node-exporter-internal
